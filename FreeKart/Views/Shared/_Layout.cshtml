<!DOCTYPE html>
<html lang="en">
<head>
    <title>Bootstrap Example</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
 
    <script src="https://js.stripe.com/v3/"></script>

    <style>
        .jumbotron img {
            width: 250px;
            height: 200px;
        }

        .head3 {
            text-decoration: underline;
        }

        .jumbotron {
            background-color: lightgrey;
            min-width: 30px;
        }

        .catgry {
            width: 300px;
            height: 250px;
        }

        .productdetailsDiv {
            display: inline-grid;
            font-family: monospace;
        }

        .productbox {
            /*width: 250px;
            background-image: linear-gradient(182deg, black, transparent);
            border-radius: 1px 3px 99px;*/
            margin-bottom: 30px;
        }

        .prodimg {
            width: 145px;
            height: 125px;
        }

        .d-block {
            width: 80%;
            height: 400px;
            margin-left: 150px;
        }

        .cartimg {
            width: 150px;
            height: 100px;
        }

        .paymtimg {
            width: 50px;
            height: 25px;
            cursor: pointer;
        }
        a{
            cursor:pointer;
        }
    </style>
</head>
<body>

    <nav class="navbar navbar-expand-sm bg-dark navbar-dark sticky-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="/home/index">
                <img src="~/Images/freekart_logo.png" width="185px;" />
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mynavbar">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="d-flex justify-content-center">
                <input class="form-control me-2" type="text" placeholder="Search" />
                <button class="btn btn-primary" type="button">Search</button>
            </div>
            <div class="collapse  d-flex justify-content-center" id="mynavbar">


                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" data-bs-toggle="modal" data-bs-target="#signupModal">Signup</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-bs-toggle="modal" data-bs-target="#loginModal" data-bs-dismiss="modal">Login</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-bs-toggle="modal" data-bs-target="#contactModal">Contact</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link bg-primary" href="/product/cartdetails">
                            Check Out <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-cart" viewBox="0 0 16 16">
                                <path d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5M3.102 4l1.313 7h8.17l1.313-7zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4m7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4m-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2m7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2" />
                            </svg><span id="cart-count" class="badge bg-danger">0</span>
                        </a>

                    </li>
                </ul>



            </div>
        </div>
    </nav>
    <!-- ✅ SIGNUP MODAL -->
    <div class="modal fade" id="signupModal" tabindex="-1" aria-labelledby="signupModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">

                <div class="modal-header">
                    <h5 class="modal-title">Signup</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>

                <div class="modal-body">
                    <form id="signupForm">
                        <div class="mb-3">
                            <label class="form-label">Full Name</label>
                            <input type="text" class="form-control" id="signupName" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Email</label>
                            <input type="email" class="form-control" id="signupEmail" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Password</label>
                            <input type="password" class="form-control" id="signupPassword" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Confirm Password</label>
                            <input type="password" class="form-control" id="confirmPassword" required>
                            <div id="passwordError" class="text-danger mt-1" style="display:none;">❌ Passwords do not match.</div>
                        </div>
                        <button type="submit" class="btn btn-success w-100">Sign Up</button>
                    </form>
                </div>

                <div class="modal-footer">
                    <small>
                        Already have an account?
                        <a href="#" data-bs-toggle="modal" data-bs-target="#loginModal" data-bs-dismiss="modal">Login</a>
                    </small>
                </div>

            </div>
        </div>
    </div>

    <!-- ✅ LOGIN MODAL -->
    <div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">

                <div class="modal-header">
                    <h5 class="modal-title">Login</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>

                <div class="modal-body">
                    <form id="loginForm">
                        <div class="mb-3">
                            <label class="form-label">Email</label>
                            <input type="email" class="form-control" id="loginEmail" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Password</label>
                            <input type="password" class="form-control" id="loginPassword" required>
                        </div>
                        <button type="submit" class="btn btn-primary w-100">Login</button>
                    </form>
                </div>

                <div class="modal-footer">
                    <small>
                        Don't have an account?
                        <a href="#" data-bs-toggle="modal" data-bs-target="#signupModal" data-bs-dismiss="modal">Signup</a>
                    </small>
                </div>

            </div>
        </div>
    </div>
    <!-- ✅ Contact Modal -->
    <div class="modal fade" id="contactModal" tabindex="-1" aria-labelledby="contactModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content shadow">

                <div class="modal-header bg-primary text-white">
                    <h5 class="modal-title" id="contactModalLabel">Contact Us</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>

                <div class="modal-body">
                    <form id="contactForm">
                        <div class="mb-3">
                            <label for="contactName" class="form-label">Full Name</label>
                            <input type="text" class="form-control" id="contactName" required>
                        </div>
                        <div class="mb-3">
                            <label for="contactEmail" class="form-label">Email</label>
                            <input type="email" class="form-control" id="contactEmail" required>
                        </div>
                        <div class="mb-3">
                            <label for="contactSubject" class="form-label">Subject</label>
                            <input type="text" class="form-control" id="contactSubject" required>
                        </div>
                        <div class="mb-3">
                            <label for="contactMessage" class="form-label">Message</label>
                            <textarea class="form-control" id="contactMessage" rows="3" required></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary w-100">Send Message</button>
                        <div id="contactSuccess" class="mt-3 text-success d-none">✅ Message sent successfully!</div>
                    </form>
                </div>

                <div class="modal-footer">
                    <small class="text-muted">We’ll get back to you as soon as possible.</small>
                </div>
            </div>
        </div>
    </div>




    <div class="container-fluid mt-3">
        @RenderBody()
    </div>
    <!-- ✅ Validation Script -->
    <script>
        document.getElementById("signupForm").addEventListener("submit", function (e) {
            e.preventDefault();
            const password = document.getElementById("signupPassword").value;
            const confirm = document.getElementById("confirmPassword").value;
            const errorDiv = document.getElementById("passwordError");

            if (password !== confirm) {
                errorDiv.style.display = "block";
            } else {
                errorDiv.style.display = "none";
                alert("✅ Signup successful!");
                bootstrap.Modal.getInstance(document.getElementById("signupModal")).hide();
                // TODO: Send data to backend or Firebase
            }
        });

        document.getElementById("loginForm").addEventListener("submit", function (e) {
            e.preventDefault();
            alert("✅ Logged in!");
            bootstrap.Modal.getInstance(document.getElementById("loginModal")).hide();
            // TODO: Verify login credentials
        });
    </script>
    <!-- Simple Form Validation Script -->
    <script>
        document.getElementById("contactForm") ?.addEventListener("submit", function (e) {
            e.preventDefault();

            const email = document.getElementById("contactEmail").value;

            const emailPattern = new RegExp(/^ [^\s] +[^\s] +\.[^\s]+$ /);

            if (!emailPattern.test(email)) {
                alert("❌ Invalid email address.");
                return;
            }

            // Success logic
            document.getElementById("contactSuccess").classList.remove("d-none");
            this.reset();
        });

    </script>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            debugger
            let cart = JSON.parse(localStorage.getItem("cart")) || {};

            updateCartUI();
            updateCartCount();

            // Add to cart
            document.querySelectorAll(".add-to-cart").forEach(btn => {
                btn.addEventListener("click", function () {
                    debugger
                    const id = this.dataset.productId;

                    cart[id] = cart[id] ? cart[id] + 1 : 1;
                    localStorage.setItem("cart", JSON.stringify(cart));

                    this.classList.add("d-none");
                    const controls = document.querySelector(`.qty-controls[data-product-id="${id}"]`);
                    controls.classList.remove("d-none");
                    controls.querySelector(".qty-value").innerText = cart[id];

                    updateCartCount();
                });
            });

            // Plus button
            document.querySelectorAll(".plus-btn").forEach(btn => {
                btn.addEventListener("click", function () {
                    debugger
                    const id = this.closest(".qty-controls").dataset.productId;
                    cart[id]++;
                    localStorage.setItem("cart", JSON.stringify(cart));
                    this.closest(".qty-controls").querySelector(".qty-value").innerText = cart[id];
                    updateCartCount();
                });
            });

            // Minus button
            document.querySelectorAll(".minus-btn").forEach(btn => {
                btn.addEventListener("click", function () {
                    debugger
                    const control = this.closest(".qty-controls");
                    const id = control.dataset.productId;

                    if (cart[id] > 1) {
                        cart[id]--;
                        control.querySelector(".qty-value").innerText = cart[id];
                    } else {
                        delete cart[id];
                        control.classList.add("d-none");
                        document.querySelector(`.add-to-cart[data-product-id="${id}"]`).classList.remove("d-none");
                    }

                    localStorage.setItem("cart", JSON.stringify(cart));
                    updateCartCount();
                });
            });

            function updateCartCount() {
                debugger
                let total = Object.values(cart).reduce((sum, val) => sum + val, 0);
                document.getElementById("cart-count").innerText = total;
            }

            function updateCartUI() {
                Object.keys(cart).forEach(id => {
                    document.querySelector(`.add-to-cart[data-product-id="${id}"]`) ?.classList.add("d-none");
                    const controls = document.querySelector(`.qty-controls[data-product-id="${id}"]`);
                    if (controls) {
                        controls.classList.remove("d-none");
                        controls.querySelector(".qty-value").innerText = cart[id];
                    }
                });
            }
        });
    </script>


</body>
</html>


